<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#4299e1">
    <title>TECNO Pemasaran</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== VARIABLES & RESET ===== */
        :root {
            --primary: #2d3748;
            --primary-dark: #1a202c;
            --secondary: #4a5568;
            --accent: #4299e1;
            --light: #f7fafc;
            --dark: #1a202c;
            --success: #38b2ac;
            --warning: #ed8936;
            --danger: #f56565;
            --critical: #c53030;
            --glass: rgba(255, 255, 255, 0.95);
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --card-bg: #ffffff;
            --input-bg: #f8fafc;
            --border-color: #e2e8f0;
            --admin: #f6ad55;
            --moderator: #9f7aea;
            --share: #805ad5;
            --maintenance: #2b6cb0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            height: 100%;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: var(--dark);
            position: relative;
        }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        @keyframes slideIn {
            from { transform: translateY(-100%); }
            to { transform: translateY(0); }
        }

        /* ===== MAINTENANCE OVERLAY ===== */
        #maintenanceOverlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #2b6cb0, #4299e1);
            z-index: 9999;
            color: white;
            overflow-y: auto;
            padding: 20px;
        }

        .maintenance-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            padding: 40px 20px;
        }

        .maintenance-robot {
            width: 200px;
            height: 200px;
            margin: 0 auto 40px;
            position: relative;
            animation: float 3s infinite ease-in-out;
        }

        .robot-body {
            width: 120px;
            height: 120px;
            background: white;
            border-radius: 25px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .robot-head {
            width: 80px;
            height: 60px;
            background: white;
            border-radius: 20px 20px 10px 10px;
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
        }

        .robot-eye {
            width: 15px;
            height: 15px;
            background: #4299e1;
            border-radius: 50%;
            position: absolute;
            top: 15px;
            animation: pulse 1s infinite;
        }

        .robot-eye.left { left: 20px; }
        .robot-eye.right { right: 20px; }

        .robot-arm {
            width: 60px;
            height: 10px;
            background: white;
            border-radius: 5px;
            position: absolute;
            top: 70px;
        }

        .robot-arm.left {
            left: -50px;
            transform: rotate(45deg);
        }

        .robot-arm.right {
            right: -50px;
            transform: rotate(-45deg);
        }

        .robot-tool {
            width: 25px;
            height: 25px;
            background: #f6ad55;
            border-radius: 50%;
            position: absolute;
            top: -7px;
        }

        .robot-tool.left { left: -15px; }
        .robot-tool.right { right: -15px; }

        .maintenance-title {
            font-size: 3rem;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        .maintenance-message {
            font-size: 1.8rem;
            margin-bottom: 30px;
            font-weight: bold;
        }

        .maintenance-timer {
            font-size: 4rem;
            font-family: monospace;
            font-weight: bold;
            margin: 30px 0;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            display: inline-block;
        }

        .maintenance-progress {
            width: 100%;
            max-width: 400px;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            margin: 30px auto;
            overflow: hidden;
        }

        .maintenance-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #f6ad55, #ed8936);
            border-radius: 10px;
            width: 0%;
            transition: width 0.5s ease;
        }

        .maintenance-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
            backdrop-filter: blur(10px);
        }

        /* ===== LOGIN PAGE ===== */
        .login-wrapper {
            position: relative;
            z-index: 2;
            width: 100%;
            max-width: 550px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }

        .login-card {
            background: var(--glass);
            border-radius: 16px;
            padding: 40px 35px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .login-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--accent), var(--success));
            border-radius: 16px 16px 0 0;
        }

        /* Logo Header */
        .logo-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo-icon {
            width: 85px;
            height: 85px;
            background: linear-gradient(135deg, var(--accent), var(--success));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 25px;
            color: white;
            font-size: 2.2rem;
            box-shadow: 0 8px 25px rgba(66, 153, 225, 0.2);
        }

        .system-title {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .system-subtitle {
            font-size: 1.1rem;
            color: var(--secondary);
            font-weight: 400;
        }

        /* Security Badge */
        .security-badge {
            position: absolute;
            top: 25px;
            right: 25px;
            background: rgba(56, 178, 172, 0.08);
            border: 1px solid rgba(56, 178, 172, 0.2);
            border-radius: 25px;
            padding: 8px 15px;
            font-size: 0.85rem;
            color: var(--success);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Forms */
        .form-group {
            margin-bottom: 30px;
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: var(--dark);
            font-size: 1rem;
        }

        .input-group {
            position: relative;
        }

        .form-control {
            width: 100%;
            padding: 16px 25px 16px 55px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            color: var(--dark);
            font-size: 1.1rem;
            transition: all 0.3s ease;
            outline: none;
        }

        .form-control:focus {
            border-color: var(--accent);
            background: white;
            box-shadow: 0 0 0 4px rgba(66, 153, 225, 0.1);
        }

        .input-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #718096;
            font-size: 1.3rem;
        }

        .form-control:focus + .input-icon {
            color: var(--accent);
        }

        /* ===== BUTTONS ===== */
        .btn {
            padding: 18px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent), #3182ce);
            color: white;
            box-shadow: 0 5px 20px rgba(66, 153, 225, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(66, 153, 225, 0.4);
        }

        .btn-secondary {
            background: white;
            color: var(--dark);
            border: 2px solid #e2e8f0;
        }

        .btn-secondary:hover {
            background: #f8fafc;
            border-color: #cbd5e0;
        }

        .btn-admin {
            background: linear-gradient(135deg, var(--admin), #dd6b20);
            color: white;
            box-shadow: 0 5px 20px rgba(246, 173, 85, 0.3);
        }

        .btn-admin:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(246, 173, 85, 0.4);
        }

        .btn-moderator {
            background: linear-gradient(135deg, var(--moderator), #805ad5);
            color: white;
            box-shadow: 0 5px 20px rgba(159, 122, 234, 0.3);
        }

        .btn-moderator:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(159, 122, 234, 0.4);
        }

        .btn-share {
            background: linear-gradient(135deg, var(--share), #6b46c1);
            color: white;
            box-shadow: 0 4px 15px rgba(128, 90, 213, 0.3);
        }

        .btn-share:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(128, 90, 213, 0.4);
        }

        .btn-maintenance {
            background: linear-gradient(135deg, var(--maintenance), #4299e1);
            color: white;
            box-shadow: 0 5px 20px rgba(43, 108, 176, 0.3);
            animation: pulse 2s infinite;
        }

        .btn-maintenance:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(43, 108, 176, 0.4);
        }

        /* ===== DASHBOARD ===== */
        #dashboard, #adminDashboard, #moderatorDashboard {
            display: none;
            position: relative;
            z-index: 2;
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
            min-height: 100vh;
        }

        .dashboard-wrapper {
            background: var(--glass);
            border-radius: 16px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            padding: 30px;
            position: relative;
            overflow: hidden;
        }

        .dashboard-wrapper::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent), var(--success));
            border-radius: 16px 16px 0 0;
        }

        .admin-dashboard-wrapper::before {
            background: linear-gradient(90deg, var(--admin), var(--warning));
        }

        .moderator-dashboard-wrapper::before {
            background: linear-gradient(90deg, var(--moderator), var(--accent));
        }

        /* Dashboard Header */
        .dashboard-header {
            text-align: center;
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 1px solid var(--border-color);
        }

        .dashboard-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin: 0 auto 20px;
        }

        .user-dashboard-icon {
            background: linear-gradient(135deg, var(--accent), var(--success));
        }

        .admin-dashboard-icon {
            background: linear-gradient(135deg, var(--admin), var(--warning));
        }

        .moderator-dashboard-icon {
            background: linear-gradient(135deg, var(--moderator), var(--accent));
        }

        .dashboard-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .dashboard-subtitle {
            font-size: 1rem;
            color: var(--secondary);
        }

        /* ===== STATS CARDS ===== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            border: 2px solid var(--border-color);
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .stat-label {
            color: var(--secondary);
            font-size: 0.9rem;
        }

        /* ===== ADMIN/MODERATOR PANELS ===== */
        .panel {
            background: rgba(246, 173, 85, 0.05);
            border: 2px solid rgba(246, 173, 85, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .moderator-panel {
            background: rgba(159, 122, 234, 0.05);
            border: 2px solid rgba(159, 122, 234, 0.1);
        }

        .panel h3 {
            color: var(--admin);
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .moderator-panel h3 {
            color: var(--moderator);
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
            margin-bottom: 20px;
            max-height: 400px;
            overflow-y: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .data-table th {
            background: var(--admin);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        .moderator-panel .data-table th {
            background: var(--moderator);
        }

        .data-table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .data-table tr:hover {
            background: rgba(246, 173, 85, 0.05);
        }

        .moderator-panel .data-table tr:hover {
            background: rgba(159, 122, 234, 0.05);
        }

        /* Badges */
        .badge {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            display: inline-block;
        }

        .badge-admin { background: var(--admin); color: white; }
        .badge-moderator { background: var(--moderator); color: white; }
        .badge-user { background: var(--accent); color: white; }
        .badge-critical { background: var(--critical); color: white; animation: pulse 2s infinite; }
        .badge-warning { background: var(--warning); color: white; }
        .badge-danger { background: var(--danger); color: white; }
        .badge-maintenance { background: var(--maintenance); color: white; animation: pulse 1.5s infinite; }

        /* ===== MAINTENANCE CONTROL PANEL ===== */
        .maintenance-panel {
            background: linear-gradient(135deg, rgba(43, 108, 176, 0.1), rgba(66, 153, 225, 0.1));
            border: 2px solid rgba(43, 108, 176, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            animation: slideIn 0.5s ease;
        }

        .maintenance-panel h3 {
            color: var(--maintenance);
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .maintenance-status {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid var(--success);
        }

        .maintenance-status.maintenance-active {
            border-left-color: var(--maintenance);
            background: rgba(43, 108, 176, 0.05);
        }

        /* ===== ACTION BUTTONS ===== */
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .action-buttons .btn {
            width: auto;
            min-width: 200px;
        }

        /* ===== UTILITY CLASSES ===== */
        .mt-3 { margin-top: 1rem; }
        .mt-4 { margin-top: 1.5rem; }
        .d-none { display: none; }
        .text-center { text-align: center; }
        .row { display: flex; flex-wrap: wrap; margin: -10px; }
        .col-md-6 { padding: 10px; width: 50%; }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 768px) {
            .login-card {
                padding: 30px 20px;
            }
            
            .dashboard-wrapper {
                padding: 20px;
            }
            
            .dashboard-title {
                font-size: 1.5rem;
            }
            
            .btn {
                padding: 15px;
                font-size: 1rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .col-md-6 {
                width: 100%;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .action-buttons .btn {
                width: 100%;
            }
            
            .maintenance-title {
                font-size: 2rem;
            }
            
            .maintenance-message {
                font-size: 1.2rem;
            }
            
            .maintenance-timer {
                font-size: 2.5rem;
            }
        }

        @media (max-width: 576px) {
            .logo-icon {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
            
            .system-title {
                font-size: 1.5rem;
            }
            
            .security-badge {
                top: 15px;
                right: 15px;
                padding: 6px 12px;
                font-size: 0.75rem;
            }
            
            .maintenance-robot {
                width: 150px;
                height: 150px;
            }
            
            .robot-body {
                width: 90px;
                height: 90px;
            }
            
            .robot-head {
                width: 60px;
                height: 45px;
            }
        }
    </style>
</head>
<body>
    <!-- ===== MAINTENANCE OVERLAY (HIDDEN BY DEFAULT) ===== -->
    <div id="maintenanceOverlay">
        <div class="maintenance-content">
            <div class="maintenance-robot">
                <div class="robot-body"></div>
                <div class="robot-head">
                    <div class="robot-eye left"></div>
                    <div class="robot-eye right"></div>
                </div>
                <div class="robot-arm left">
                    <div class="robot-tool left"></div>
                </div>
                <div class="robot-arm right">
                    <div class="robot-tool right"></div>
                </div>
            </div>
            
            <h1 class="maintenance-title">
                <i class="fas fa-tools"></i> SEDANG DALAM PERBAIKAN
            </h1>
            
            <div class="maintenance-message" id="maintenanceMessageDisplay">
                Admin Ryzzi Sedang Perbaikan Apps ini
            </div>
            
            <div class="maintenance-timer" id="maintenanceTimer">
                00:00
            </div>
            
            <div class="maintenance-progress">
                <div class="maintenance-progress-bar" id="maintenanceProgressBar"></div>
            </div>
            <div style="margin-top: 10px; font-size: 1.2rem;" id="maintenanceProgressText">
                0% Complete
            </div>
            
            <div class="maintenance-info">
                <h3><i class="fas fa-info-circle"></i> Sistem sedang dalam pemeliharaan</h3>
                <p style="margin-top: 15px; font-size: 1.1rem;">
                    Tim admin sedang melakukan perbaikan untuk pengalaman yang lebih baik.
                    Harap tunggu sebentar...
                </p>
                <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-top: 20px;">
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; color: #f6ad55;"><i class="fas fa-bug"></i></div>
                        <div>Perbaikan Bug</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; color: #38b2ac;"><i class="fas fa-shield-alt"></i></div>
                        <div>Update Keamanan</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; color: #ed8936;"><i class="fas fa-bolt"></i></div>
                        <div>Optimasi Performa</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; color: #4299e1;"><i class="fas fa-cogs"></i></div>
                        <div>Maintenance Sistem</div>
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 30px; font-size: 1rem; color: rgba(255, 255, 255, 0.8);">
                <i class="fas fa-clock"></i> Perkiraan selesai dalam: 
                <span id="maintenanceCountdown" style="font-weight: bold;">0 menit</span>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
    </div>

    <!-- Login Page -->
    <div id="home">
        <div class="login-wrapper">
            <div class="login-card">
                <!-- Security Badge -->
                <div class="security-badge">
                    <i class="fas fa-shield-alt"></i>
                    <span>Protected</span>
                </div>

                <!-- Header -->
                <div class="logo-header">
                    <div class="logo-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h1 class="system-title">TECNO Pemasaran</h1>
                    <p class="system-subtitle">Digital Pemasaran Platform</p>
                </div>

                <!-- Login Form -->
                <form id="loginForm">
                    <div class="form-group">
                        <label class="form-label" for="loginUsername">
                            <i class="fas fa-user"></i> Username
                        </label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="loginUsername" 
                                   placeholder="Enter your username" required>
                            <div class="input-icon">
                                <i class="fas fa-user-circle"></i>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="loginPassword">
                            <i class="fas fa-lock"></i> Password
                        </label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="loginPassword" 
                                   placeholder="Enter your password" required>
                            <div class="input-icon">
                                <i class="fas fa-key"></i>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-sign-in-alt"></i> Sign In
                    </button>
                    
                    <div class="error-message" id="loginError">
                        <i class="fas fa-exclamation-circle"></i> Invalid username or password
                    </div>

                    <a href="#" class="forgot-link" id="showForgotPasswordBtn" style="display: block; text-align: center; color: var(--accent); margin-top: 15px; text-decoration: none;">
                        <i class="fas fa-question-circle"></i> Forgot Password?
                    </a>
                </form>

                <!-- Register Button -->
                <button id="showRegisterBtn" class="btn btn-secondary mt-4">
                    <i class="fas fa-user-plus"></i> Create New Account
                </button>

                <!-- Admin Login Button -->
                <button id="showAdminLoginBtn" class="btn btn-admin mt-3">
                    <i class="fas fa-user-shield"></i> Admin Login
                </button>

                <!-- Moderator Login Button -->
                <button id="showModeratorLoginBtn" class="btn btn-moderator mt-3">
                    <i class="fas fa-user-cog"></i> Moderator Login
                </button>

                <!-- Registration Form -->
                <form id="registerForm">
                    <div class="form-group">
                        <label class="form-label" for="registerUsername">
                            <i class="fas fa-user"></i> Username
                        </label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="registerUsername" 
                                   placeholder="Choose a username" required>
                            <div class="input-icon">
                                <i class="fas fa-at"></i>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="registerPassword">
                            <i class="fas fa-lock"></i> Password
                        </label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="registerPassword" 
                                   placeholder="Minimum 8 characters" required>
                            <div class="input-icon">
                                <i class="fas fa-lock"></i>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="registerEmail">
                            <i class="fas fa-envelope"></i> Email Address
                        </label>
                        <div class="input-group">
                            <input type="email" class="form-control" id="registerEmail" 
                                   placeholder="email@example.com" required>
                            <div class="input-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="registerFullName">
                            <i class="fas fa-id-card"></i> Full Name
                        </label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="registerFullName" 
                                   placeholder="Your full name" required>
                            <div class="input-icon">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="registerPhone">
                            <i class="fas fa-phone"></i> Phone Number
                        </label>
                        <div class="input-group">
                            <input type="tel" class="form-control" id="registerPhone" 
                                   placeholder="08xxxxxxxxx" required>
                            <div class="input-icon">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-user-check"></i> Register Now
                    </button>
                    
                    <div class="error-message" id="registerError">
                        <i class="fas fa-exclamation-circle"></i> Registration error occurred
                    </div>

                    <button type="button" id="backToLoginBtn" class="btn btn-secondary mt-3">
                        <i class="fas fa-arrow-left"></i> Back to Login
                    </button>
                </form>

                <!-- Admin Login Form -->
                <form id="adminLoginForm">
                    <div class="form-group">
                        <label class="form-label" for="adminUsername">
                            <i class="fas fa-user-shield"></i> Admin Username
                        </label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="adminUsername" 
                                   placeholder="Enter admin username" required>
                            <div class="input-icon">
                                <i class="fas fa-user-cog"></i>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="adminPassword">
                            <i class="fas fa-lock"></i> Admin Password
                        </label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="adminPassword" 
                                   placeholder="Enter admin password" required>
                            <div class="input-icon">
                                <i class="fas fa-key"></i>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-admin">
                        <i class="fas fa-sign-in-alt"></i> Admin Login
                    </button>
                    
                    <div class="error-message" id="adminLoginError">
                        <i class="fas fa-exclamation-circle"></i> Invalid admin credentials
                    </div>

                    <button type="button" id="backToLoginFromAdminBtn" class="btn btn-secondary mt-3">
                        <i class="fas fa-arrow-left"></i> Back to Login
                    </button>
                </form>

                <!-- Moderator Login Form -->
                <form id="moderatorLoginForm">
                    <div class="form-group">
                        <label class="form-label" for="moderatorUsername">
                            <i class="fas fa-user-cog"></i> Moderator Username
                        </label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="moderatorUsername" 
                                   placeholder="Enter moderator username" required>
                            <div class="input-icon">
                                <i class="fas fa-user-cog"></i>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="moderatorPassword">
                            <i class="fas fa-lock"></i> Moderator Password
                        </label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="moderatorPassword" 
                                   placeholder="Enter moderator password" required>
                            <div class="input-icon">
                                <i class="fas fa-key"></i>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-moderator">
                        <i class="fas fa-sign-in-alt"></i> Moderator Login
                    </button>
                    
                    <div class="error-message" id="moderatorLoginError">
                        <i class="fas fa-exclamation-circle"></i> Invalid moderator credentials
                    </div>

                    <button type="button" id="backToLoginFromModeratorBtn" class="btn btn-secondary mt-3">
                        <i class="fas fa-arrow-left"></i> Back to Login
                    </button>
                </form>

                <!-- Footer -->
                <div class="form-footer">
                    <p>
                        <i class="fas fa-shield-alt"></i> Security By Ryzzi Cyber
                    </p>
                    <p>
                        © 2026 TECNO Pemasaran Apps. All rights reserved.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- User Dashboard -->
    <div id="dashboard">
        <div class="dashboard-wrapper">
            <!-- Dashboard Header -->
            <div class="dashboard-header">
                <div class="dashboard-icon user-dashboard-icon">
                    <i class="fas fa-upload"></i>
                </div>
                <h1 class="dashboard-title">Dashboard Upload</h1>
                <p class="dashboard-subtitle">Upload dan distribusikan konten ke berbagai platform</p>
            </div>

            <!-- Upload Form -->
            <form id="uploadForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="text" class="form-label">
                        <i class="fas fa-comment-alt"></i> Teks Promosi
                    </label>
                    <textarea class="form-control" id="text" name="text" placeholder="Masukkan teks promosi Anda..." maxlength="1000"></textarea>
                    <small style="color: var(--secondary); display: block; margin-top: 5px;">
                        <i class="fas fa-exclamation-triangle"></i> Hindari input yang mencurigakan
                    </small>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="photo" class="form-label">
                                <i class="fas fa-image"></i> Foto
                            </label>
                            <input type="file" class="form-control" id="photo" name="photo" accept="image/*">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="video" class="form-label">
                                <i class="fas fa-video"></i> Video
                            </label>
                            <input type="file" class="form-control" id="video" name="video" accept="video/*">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-shopping-bag"></i> Produk (Nama, Deskripsi, Harga)
                    </label>
                    <input type="text" class="form-control mb-3" placeholder="Nama Produk" name="productName">
                    <textarea class="form-control mb-3" placeholder="Deskripsi Produk" name="productDesc"></textarea>
                    <input type="number" class="form-control" placeholder="Harga (Rp)" name="productPrice">
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i> Upload & Kirim
                    </button>
                </div>
            </form>

            <!-- Logout Button -->
            <div class="action-buttons">
                <button id="logoutBtn" class="btn" style="background: linear-gradient(135deg, var(--danger), #e53e3e); color: white;">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>

            <!-- Dashboard Footer -->
            <div class="dashboard-footer">
                <p>
                    <i class="fas fa-info-circle"></i> Konten akan didistribusikan secara otomatis ke platform yang dipilih
                </p>
                <p>
                    © 2026 TECNO Pemasaran Apps. All rights reserved.
                </p>
            </div>
        </div>
    </div>

    <!-- ===== ADMIN DASHBOARD ===== -->
    <div id="adminDashboard">
        <div class="dashboard-wrapper admin-dashboard-wrapper">
            <!-- Admin Dashboard Header -->
            <div class="dashboard-header">
                <div class="dashboard-icon admin-dashboard-icon">
                    <i class="fas fa-user-shield"></i>
                </div>
                <h1 class="dashboard-title">Admin Dashboard</h1>
                <p class="dashboard-subtitle">Monitor dan kelola seluruh sistem</p>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="adminTotalUsers">0</div>
                    <div class="stat-label">Total Users</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="adminActiveUsers">0</div>
                    <div class="stat-label">Active Users</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="adminTotalShares">0</div>
                    <div class="stat-label">Total Shares</div>
                </div>
            </div>

            <!-- ===== MAINTENANCE CONTROL PANEL ===== -->
            <div class="maintenance-panel">
                <h3><i class="fas fa-tools"></i> Maintenance Control</h3>
                
                <!-- Maintenance Status -->
                <div class="maintenance-status" id="maintenanceStatus">
                    <i class="fas fa-check-circle" style="color: var(--success); font-size: 1.5rem;"></i>
                    <div style="margin-top: 10px;">
                        <strong>System Status:</strong> <span id="maintenanceStatusText">ACTIVE</span>
                        <div style="font-size: 0.9rem; color: var(--secondary); margin-top: 5px;" id="maintenanceStatusSubtext">
                            Semua user dapat mengakses sistem
                        </div>
                    </div>
                </div>

                <!-- Maintenance Controls -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="maintenanceDuration">
                                <i class="fas fa-clock"></i> Durasi Perbaikan
                            </label>
                            <select class="form-control" id="maintenanceDuration">
                                <option value="1">1 Menit</option>
                                <option value="3">3 Menit</option>
                                <option value="5" selected>5 Menit</option>
                                <option value="10">10 Menit</option>
                                <option value="15">15 Menit</option>
                                <option value="30">30 Menit</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="maintenanceMessage">
                                <i class="fas fa-comment"></i> Pesan untuk User
                            </label>
                            <textarea class="form-control" id="maintenanceMessage" rows="3" placeholder="Pesan yang akan ditampilkan ke user...">Admin Ryzzi Sedang Perbaikan Apps ini</textarea>
                        </div>
                    </div>
                </div>

                <div class="action-buttons" style="margin-top: 20px;">
                    <button id="startMaintenanceBtn" class="btn btn-maintenance">
                        <i class="fas fa-play-circle"></i> Aktifkan Mode Perbaikan
                    </button>
                    <button id="stopMaintenanceBtn" class="btn" style="background: linear-gradient(135deg, var(--success), #2c9c94); color: white; display: none;">
                        <i class="fas fa-stop-circle"></i> Nonaktifkan Perbaikan
                    </button>
                </div>

                <div style="margin-top: 20px; font-size: 0.9rem; color: var(--secondary); text-align: center;">
                    <i class="fas fa-info-circle"></i> Saat diaktifkan, semua user dan moderator akan melihat halaman perbaikan
                </div>
            </div>

            <!-- User Management Panel -->
            <div class="panel">
                <h3><i class="fas fa-users"></i> User Management</h3>
                <div class="table-container">
                    <table class="data-table" id="adminUsersTable">
                        <thead>
                            <tr>
                                <th>No</th>
                                <th>Username</th>
                                <th>Full Name</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="adminUsersTableBody">
                            <!-- Data akan diisi oleh JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- System Actions -->
            <div class="panel">
                <h3><i class="fas fa-cogs"></i> System Actions</h3>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="deleteUsername">
                                Delete User
                            </label>
                            <input type="text" class="form-control" id="deleteUsername" 
                                   placeholder="Enter username to delete">
                        </div>
                        <button id="adminDeleteUserBtn" class="btn" style="background: linear-gradient(135deg, var(--danger), #e53e3e); color: white; width: 100%;">
                            <i class="fas fa-user-slash"></i> Delete User
                        </button>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="broadcastMessage">
                                Broadcast Message
                            </label>
                            <textarea class="form-control" id="broadcastMessage" 
                                      placeholder="Message for all users" rows="3"></textarea>
                        </div>
                        <button id="adminBroadcastBtn" class="btn" style="background: linear-gradient(135deg, var(--success), #2c9c94); color: white; width: 100%;">
                            <i class="fas fa-bullhorn"></i> Send Broadcast
                        </button>
                    </div>
                </div>
            </div>

            <!-- Logout Button -->
            <div class="action-buttons">
                <button id="adminLogoutBtn" class="btn" style="background: linear-gradient(135deg, var(--danger), #e53e3e); color: white;">
                    <i class="fas fa-sign-out-alt"></i> Logout Admin
                </button>
                <button id="adminRefreshBtn" class="btn" style="background: linear-gradient(135deg, var(--warning), #dd6b20); color: white;">
                    <i class="fas fa-sync-alt"></i> Refresh Data
                </button>
            </div>

            <!-- Admin Dashboard Footer -->
            <div class="dashboard-footer">
                <p>
                    <i class="fas fa-eye"></i> System Monitoring - All Activities Logged
                </p>
                <p>
                    © 2026 TECNO Pemasaran Apps. Admin Dashboard
                </p>
            </div>
        </div>
    </div>

    <!-- ===== MODERATOR DASHBOARD ===== -->
    <div id="moderatorDashboard">
        <div class="dashboard-wrapper moderator-dashboard-wrapper">
            <!-- Moderator Dashboard Header -->
            <div class="dashboard-header">
                <div class="dashboard-icon moderator-dashboard-icon">
                    <i class="fas fa-user-cog"></i>
                </div>
                <h1 class="dashboard-title">Moderator Dashboard</h1>
                <p class="dashboard-subtitle">Manajemen pengguna dan konten</p>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="modTotalUsers">0</div>
                    <div class="stat-label">Total Users</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="modTodayReg">0</div>
                    <div class="stat-label">Registrasi Hari Ini</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="modActiveUsers">0</div>
                    <div class="stat-label">Active Users</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="modTotalShares">0</div>
                    <div class="stat-label">Total Shares</div>
                </div>
            </div>

            <!-- Create User Panel -->
            <div class="panel moderator-panel">
                <h3><i class="fas fa-user-plus"></i> Create New User</h3>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="newUsername">
                                Username
                            </label>
                            <input type="text" class="form-control" id="newUsername" 
                                   placeholder="Enter username" required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="newPassword">
                                Password
                            </label>
                            <input type="password" class="form-control" id="newPassword" 
                                   placeholder="Enter password" required>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="newEmail">
                                Email
                            </label>
                            <input type="email" class="form-control" id="newEmail" 
                                   placeholder="email@example.com" required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="newFullName">
                                Full Name
                            </label>
                            <input type="text" class="form-control" id="newFullName" 
                                   placeholder="Full name" required>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="newPhone">
                                Phone Number
                            </label>
                            <input type="tel" class="form-control" id="newPhone" 
                                   placeholder="08xxxxxxxxx" required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="userRole">
                                Role
                            </label>
                            <select class="form-control" id="userRole" required>
                                <option value="user">User</option>
                                <option value="moderator">Moderator</option>
                            </select>
                        </div>
                    </div>
                </div>
                <button id="modCreateUserBtn" class="btn" style="background: linear-gradient(135deg, var(--success), #2c9c94); color: white; margin-top: 20px;">
                    <i class="fas fa-user-plus"></i> Create User
                </button>
            </div>

            <!-- User List Panel -->
            <div class="panel moderator-panel">
                <h3><i class="fas fa-users"></i> User List</h3>
                <div class="table-container">
                    <table class="data-table" id="modUsersTable">
                        <thead>
                            <tr>
                                <th>No</th>
                                <th>Username</th>
                                <th>Full Name</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Registered</th>
                            </tr>
                        </thead>
                        <tbody id="modUsersTableBody">
                            <!-- Data akan diisi oleh JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Logout Button -->
            <div class="action-buttons">
                <button id="modLogoutBtn" class="btn" style="background: linear-gradient(135deg, var(--danger), #e53e3e); color: white;">
                    <i class="fas fa-sign-out-alt"></i> Logout Moderator
                </button>
                <button id="modRefreshBtn" class="btn" style="background: linear-gradient(135deg, var(--warning), #dd6b20); color: white;">
                    <i class="fas fa-sync-alt"></i> Refresh Data
                </button>
            </div>

            <!-- Moderator Dashboard Footer -->
            <div class="dashboard-footer">
                <p>
                    <i class="fas fa-shield-alt"></i> Moderator Panel - User Management
                </p>
                <p>
                    © 2026 TECNO Pemasaran Apps. Moderator Dashboard
                </p>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // ===== DATABASE & DATA =====
        const users = [];
        const activityHistory = [];
        const JWT_SECRET = 'secret_key_ryzzi_secure_2026';
        
        // ===== VARIABLES MAINTENANCE =====
        let isMaintenanceMode = false;
        let maintenanceTimeLeft = 0; // dalam detik
        let maintenanceInterval = null;

        // Default accounts
        const ADMIN_ACCOUNT = {
            username: 'admin',
            hashedPassword: '',
            email: 'admin@techno.com',
            fullName: 'System Administrator',
            phone: '081234567890',
            role: 'admin',
            registeredDate: new Date(),
            loginAttempts: 0,
            lastLoginAttempt: null,
            isLocked: false
        };

        const MODERATOR_ACCOUNT = {
            username: 'moderator',
            hashedPassword: '',
            email: 'moderator@techno.com',
            fullName: 'System Moderator',
            phone: '081298765432',
            role: 'moderator',
            registeredDate: new Date(),
            loginAttempts: 0,
            lastLoginAttempt: null,
            isLocked: false
        };

        // ===== FUNGSI MAINTENANCE =====
        function startMaintenanceMode() {
            const durationMinutes = parseInt(document.getElementById('maintenanceDuration').value);
            const customMessage = document.getElementById('maintenanceMessage').value.trim() || 
                                 'Admin Ryzzi Sedang Perbaikan Apps ini';
            
            // Konfirmasi
            if (!confirm(`Aktifkan mode perbaikan selama ${durationMinutes} menit?\n\nSemua user dan moderator akan melihat halaman perbaikan.`)) {
                return;
            }
            
            // Set waktu maintenance
            maintenanceTimeLeft = durationMinutes * 60;
            isMaintenanceMode = true;
            
            // Simpan ke localStorage
            const maintenanceData = {
                active: true,
                endTime: Date.now() + (durationMinutes * 60 * 1000),
                message: customMessage,
                duration: durationMinutes
            };
            localStorage.setItem('maintenanceMode', JSON.stringify(maintenanceData));
            
            // Update UI admin
            updateMaintenanceUI();
            
            // Mulai timer
            startMaintenanceTimer();
            
            // Broadcast maintenance status
            broadcastMaintenanceStatus();
            
            // Tampilkan konfirmasi
            alert(`✅ Mode perbaikan diaktifkan selama ${durationMinutes} menit!\n\nUser dan moderator akan melihat halaman perbaikan.`);
        }

        function stopMaintenanceMode() {
            if (!confirm('Nonaktifkan mode perbaikan sekarang?\n\nSemua user akan kembali bisa mengakses sistem.')) {
                return;
            }
            
            // Reset semua variabel
            isMaintenanceMode = false;
            clearInterval(maintenanceInterval);
            maintenanceTimeLeft = 0;
            
            // Hapus dari localStorage
            localStorage.removeItem('maintenanceMode');
            
            // Update UI admin
            updateMaintenanceUI();
            
            // Broadcast status normal
            broadcastMaintenanceStatus();
            
            alert('✅ Mode perbaikan dinonaktifkan!\n\nSemua user sudah bisa mengakses sistem kembali.');
        }

        function startMaintenanceTimer() {
            if (maintenanceInterval) {
                clearInterval(maintenanceInterval);
            }
            
            maintenanceInterval = setInterval(() => {
                maintenanceTimeLeft--;
                
                if (maintenanceTimeLeft <= 0) {
                    stopMaintenanceMode();
                    return;
                }
                
                updateMaintenanceTimerDisplay();
            }, 1000);
        }

        function updateMaintenanceTimerDisplay() {
            const minutes = Math.floor(maintenanceTimeLeft / 60);
            const seconds = maintenanceTimeLeft % 60;
            
            // Update timer di overlay
            const timerDisplay = document.getElementById('maintenanceTimer');
            const countdownDisplay = document.getElementById('maintenanceCountdown');
            const progressBar = document.getElementById('maintenanceProgressBar');
            const progressText = document.getElementById('maintenanceProgressText');
            
            if (timerDisplay) {
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
            
            if (countdownDisplay) {
                countdownDisplay.textContent = `${minutes} menit ${seconds} detik`;
            }
            
            // Update progress bar
            if (progressBar && progressText) {
                const maintenanceData = JSON.parse(localStorage.getItem('maintenanceMode') || '{}');
                const totalTime = (maintenanceData.duration || 5) * 60;
                const progress = ((totalTime - maintenanceTimeLeft) / totalTime) * 100;
                progressBar.style.width = `${progress}%`;
                progressText.textContent = `${Math.round(progress)}% Complete`;
            }
        }

        function updateMaintenanceUI() {
            const startBtn = document.getElementById('startMaintenanceBtn');
            const stopBtn = document.getElementById('stopMaintenanceBtn');
            const statusDiv = document.getElementById('maintenanceStatus');
            const statusText = document.getElementById('maintenanceStatusText');
            const statusSubtext = document.getElementById('maintenanceStatusSubtext');
            
            if (isMaintenanceMode) {
                startBtn.style.display = 'none';
                stopBtn.style.display = 'flex';
                statusDiv.className = 'maintenance-status maintenance-active';
                statusText.innerHTML = '<span style="color: var(--maintenance);">MAINTENANCE MODE</span>';
                statusSubtext.innerHTML = `<i class="fas fa-clock"></i> Selesai dalam: ${Math.floor(maintenanceTimeLeft / 60)}:${(maintenanceTimeLeft % 60).toString().padStart(2, '0')}`;
            } else {
                startBtn.style.display = 'flex';
                stopBtn.style.display = 'none';
                statusDiv.className = 'maintenance-status';
                statusText.innerHTML = '<span style="color: var(--success);">ACTIVE</span>';
                statusSubtext.innerHTML = '<i class="fas fa-check-circle"></i> Semua user dapat mengakses sistem';
            }
        }

        function showMaintenanceOverlay() {
            const overlay = document.getElementById('maintenanceOverlay');
            const maintenanceData = JSON.parse(localStorage.getItem('maintenanceMode') || '{}');
            const message = maintenanceData.message || 'Admin Ryzzi Sedang Perbaikan Apps ini';
            
            document.getElementById('maintenanceMessageDisplay').textContent = message;
            overlay.style.display = 'block';
            
            // Update timer display
            updateMaintenanceTimerDisplay();
        }

        function hideMaintenanceOverlay() {
            const overlay = document.getElementById('maintenanceOverlay');
            overlay.style.display = 'none';
        }

        function checkMaintenanceStatus() {
            const maintenanceData = JSON.parse(localStorage.getItem('maintenanceMode') || '{}');
            
            if (maintenanceData.active && maintenanceData.endTime) {
                const endTime = parseInt(maintenanceData.endTime);
                const now = Date.now();
                
                if (now < endTime) {
                    // Masih dalam mode maintenance
                    isMaintenanceMode = true;
                    maintenanceTimeLeft = Math.floor((endTime - now) / 1000);
                    
                    // Cek role user
                    const userRole = localStorage.getItem('userRole');
                    const token = localStorage.getItem('token');
                    
                    if (token && userRole === 'admin') {
                        // Admin bisa akses dashboard
                        startMaintenanceTimer();
                        updateMaintenanceUI();
                        return false; // Tidak tampilkan overlay
                    } else {
                        // User/Moderator tampilkan overlay
                        showMaintenanceOverlay();
                        startMaintenanceTimer();
                        return true; // Tampilkan overlay
                    }
                } else {
                    // Waktu sudah habis
                    localStorage.removeItem('maintenanceMode');
                    return false;
                }
            }
            return false;
        }

        function broadcastMaintenanceStatus() {
            // Simulasi broadcast ke semua user
            // Dalam implementasi nyata, ini akan menggunakan WebSocket
            console.log('Maintenance status updated:', isMaintenanceMode ? 'ACTIVE' : 'INACTIVE');
        }

        // ===== FUNGSI UTAMA =====
        async function initAccounts() {
            ADMIN_ACCOUNT.hashedPassword = await hashPassword('Ryzzi123');
            MODERATOR_ACCOUNT.hashedPassword = await hashPassword('Mode123');
            
            if (!users.find(u => u.username === 'admin')) {
                users.push(ADMIN_ACCOUNT);
            }
            if (!users.find(u => u.username === 'moderator')) {
                users.push(MODERATOR_ACCOUNT);
            }
            
            // Cek maintenance status saat init
            checkMaintenanceStatus();
        }

        async function hashPassword(password) {
            const encoder = new TextEncoder();
            const data = encoder.encode(password + JWT_SECRET);
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }

        async function comparePassword(password, hashedPassword) {
            const hashed = await hashPassword(password);
            return hashed === hashedPassword;
        }

        function generateToken(username, role = 'user') {
            const header = btoa(JSON.stringify({ alg: 'HS256', typ: 'JWT' }));
            const payload = btoa(JSON.stringify({ 
                username: username,
                role: role,
                exp: Date.now() + 3600000 // 1 jam
            }));
            const signature = btoa(JWT_SECRET);
            return `${header}.${payload}.${signature}`;
        }

        function verifyToken(token) {
            try {
                if (!token || token === 'null' || token === 'undefined') {
                    return null;
                }
                
                const parts = token.split('.');
                if (parts.length !== 3) return null;
                
                const payload = JSON.parse(atob(parts[1]));
                
                if (payload.exp && payload.exp < Date.now()) {
                    localStorage.removeItem('token');
                    localStorage.removeItem('userRole');
                    localStorage.removeItem('username');
                    return null;
                }
                
                return payload;
            } catch (error) {
                localStorage.removeItem('token');
                localStorage.removeItem('userRole');
                localStorage.removeItem('username');
                return null;
            }
        }

        // ===== DASHBOARD FUNCTIONS =====
        function showUserDashboard() {
            // Cek maintenance status
            if (checkMaintenanceStatus()) {
                // Jika sedang maintenance, tampilkan overlay dan return
                hideAllDashboards();
                return;
            }
            
            hideAllDashboards();
            dashboard.style.display = 'block';
        }

        function showAdminDashboard() {
            // Admin tidak terkena maintenance
            hideAllDashboards();
            adminDashboard.style.display = 'block';
            
            // Update UI maintenance
            updateMaintenanceUI();
            
            // Update stats
            updateAdminStats();
            renderAdminUsersTable();
        }

        function showModeratorDashboard() {
            // Cek maintenance status
            if (checkMaintenanceStatus()) {
                // Jika sedang maintenance, tampilkan overlay dan return
                hideAllDashboards();
                return;
            }
            
            hideAllDashboards();
            moderatorDashboard.style.display = 'block';
            
            // Update stats
            updateModeratorStats();
            renderModeratorUsersTable();
        }

        function hideAllDashboards() {
            home.style.display = 'none';
            dashboard.style.display = 'none';
            adminDashboard.style.display = 'none';
            moderatorDashboard.style.display = 'none';
        }

        function showLoginPage() {
            // Cek maintenance status untuk login page
            if (checkMaintenanceStatus()) {
                // Jika sedang maintenance, tampilkan overlay
                hideAllDashboards();
                home.style.display = 'none';
            } else {
                // Jika tidak maintenance, tampilkan login page
                hideAllDashboards();
                home.style.display = 'block';
                showLoginButtons();
            }
        }

        // ===== ADMIN DASHBOARD FUNCTIONS =====
        function updateAdminStats() {
            document.getElementById('adminTotalUsers').textContent = users.length;
            document.getElementById('adminActiveUsers').textContent = users.filter(u => u.role === 'user').length;
            document.getElementById('adminTotalShares').textContent = activityHistory.length;
        }

        function renderAdminUsersTable() {
            const tbody = document.getElementById('adminUsersTableBody');
            tbody.innerHTML = '';
            
            users.forEach((user, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${user.username}</td>
                    <td>${user.fullName}</td>
                    <td>${user.email}</td>
                    <td><span class="badge badge-${user.role}">${user.role}</span></td>
                    <td>
                        <button class="btn btn-small" onclick="adminQuickLogin('${user.username}')" 
                                style="background: var(--success); color: white; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem;">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function adminQuickLogin(username) {
            const user = users.find(u => u.username === username);
            if (user) {
                const token = generateToken(username, user.role);
                localStorage.setItem('token', token);
                localStorage.setItem('userRole', user.role);
                localStorage.setItem('username', username);
                
                if (user.role === 'admin') {
                    showAdminDashboard();
                } else if (user.role === 'moderator') {
                    showModeratorDashboard();
                } else {
                    showUserDashboard();
                }
            }
        }

        // ===== MODERATOR DASHBOARD FUNCTIONS =====
        function updateModeratorStats() {
            const today = new Date().toDateString();
            const todayReg = users.filter(user => 
                new Date(user.registeredDate).toDateString() === today
            ).length;
            
            document.getElementById('modTotalUsers').textContent = users.length;
            document.getElementById('modTodayReg').textContent = todayReg;
            document.getElementById('modActiveUsers').textContent = users.filter(u => u.role === 'user').length;
            document.getElementById('modTotalShares').textContent = activityHistory.length;
        }

        function renderModeratorUsersTable() {
            const tbody = document.getElementById('modUsersTableBody');
            tbody.innerHTML = '';
            
            users.forEach((user, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${user.username}</td>
                    <td>${user.fullName}</td>
                    <td>${user.email}</td>
                    <td><span class="badge badge-${user.role}">${user.role}</span></td>
                    <td>${new Date(user.registeredDate).toLocaleDateString('id-ID')}</td>
                `;
                tbody.appendChild(row);
            });
        }

        // ===== DOM ELEMENTS =====
        const home = document.getElementById('home');
        const dashboard = document.getElementById('dashboard');
        const adminDashboard = document.getElementById('adminDashboard');
        const moderatorDashboard = document.getElementById('moderatorDashboard');
        const loading = document.getElementById('loading');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const adminLoginForm = document.getElementById('adminLoginForm');
        const moderatorLoginForm = document.getElementById('moderatorLoginForm');
        const showRegisterBtn = document.getElementById('showRegisterBtn');
        const showAdminLoginBtn = document.getElementById('showAdminLoginBtn');
        const showModeratorLoginBtn = document.getElementById('showModeratorLoginBtn');
        const backToLoginBtn = document.getElementById('backToLoginBtn');
        const backToLoginFromAdminBtn = document.getElementById('backToLoginFromAdminBtn');
        const backToLoginFromModeratorBtn = document.getElementById('backToLoginFromModeratorBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const adminLogoutBtn = document.getElementById('adminLogoutBtn');
        const adminRefreshBtn = document.getElementById('adminRefreshBtn');
        const adminDeleteUserBtn = document.getElementById('adminDeleteUserBtn');
        const adminBroadcastBtn = document.getElementById('adminBroadcastBtn');
        const modLogoutBtn = document.getElementById('modLogoutBtn');
        const modRefreshBtn = document.getElementById('modRefreshBtn');
        const modCreateUserBtn = document.getElementById('modCreateUserBtn');
        
        // Maintenance elements
        const startMaintenanceBtn = document.getElementById('startMaintenanceBtn');
        const stopMaintenanceBtn = document.getElementById('stopMaintenanceBtn');

        // ===== INITIALIZATION =====
        window.addEventListener('load', async function() {
            await initAccounts();
            
            // Cek token
            const token = localStorage.getItem('token');
            if (token && verifyToken(token)) {
                const payload = verifyToken(token);
                localStorage.setItem('userRole', payload.role);
                localStorage.setItem('username', payload.username);
                
                if (payload.role === 'admin') {
                    showAdminDashboard();
                } else if (payload.role === 'moderator') {
                    showModeratorDashboard();
                } else {
                    showUserDashboard();
                }
            } else {
                showLoginPage();
            }
            
            // Event listener untuk maintenance
            if (startMaintenanceBtn) {
                startMaintenanceBtn.addEventListener('click', startMaintenanceMode);
            }
            
            if (stopMaintenanceBtn) {
                stopMaintenanceBtn.addEventListener('click', stopMaintenanceMode);
            }
        });

        // ===== FORM TOGGLE HANDLERS =====
        function showForm(formToShow) {
            // Hide all forms
            loginForm.style.display = 'none';
            registerForm.style.display = 'none';
            adminLoginForm.style.display = 'none';
            moderatorLoginForm.style.display = 'none';
            
            // Hide all buttons
            showRegisterBtn.style.display = 'none';
            showAdminLoginBtn.style.display = 'none';
            showModeratorLoginBtn.style.display = 'none';
            
            // Show selected form
            formToShow.style.display = 'block';
        }

        function showLoginButtons() {
            // Show all forms hidden, show buttons
            loginForm.style.display = 'block';
            registerForm.style.display = 'none';
            adminLoginForm.style.display = 'none';
            moderatorLoginForm.style.display = 'none';
            
            // Show all buttons
            showRegisterBtn.style.display = 'block';
            showAdminLoginBtn.style.display = 'block';
            showModeratorLoginBtn.style.display = 'block';
        }

        // Event Listeners for form toggling
        showRegisterBtn.addEventListener('click', () => showForm(registerForm));
        showAdminLoginBtn.addEventListener('click', () => showForm(adminLoginForm));
        showModeratorLoginBtn.addEventListener('click', () => showForm(moderatorLoginForm));

        backToLoginBtn.addEventListener('click', showLoginButtons);
        backToLoginFromAdminBtn.addEventListener('click', showLoginButtons);
        backToLoginFromModeratorBtn.addEventListener('click', showLoginButtons);

        // ===== FORM SUBMISSION HANDLERS =====
        // Login Form
        loginForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            loading.style.display = 'block';
            
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            
            setTimeout(async () => {
                try {
                    const user = users.find(u => u.username === username);
                    
                    if (!user) {
                        loading.style.display = 'none';
                        alert('Username atau password salah!');
                        return;
                    }
                    
                    const match = await comparePassword(password, user.hashedPassword);
                    
                    if (match) {
                        const token = generateToken(username, user.role);
                        localStorage.setItem('token', token);
                        localStorage.setItem('userRole', user.role);
                        localStorage.setItem('username', username);
                        loading.style.display = 'none';
                        
                        if (user.role === 'admin') {
                            showAdminDashboard();
                        } else if (user.role === 'moderator') {
                            showModeratorDashboard();
                        } else {
                            showUserDashboard();
                        }
                    } else {
                        loading.style.display = 'none';
                        alert('Username atau password salah!');
                    }
                } catch (err) {
                    loading.style.display = 'none';
                    alert('Error: ' + err.message);
                }
            }, 1000);
        });

        // Register Form
        registerForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            const username = document.getElementById('registerUsername').value;
            const password = document.getElementById('registerPassword').value;
            const email = document.getElementById('registerEmail').value;
            const fullName = document.getElementById('registerFullName').value;
            const phone = document.getElementById('registerPhone').value;
            
            if (!username || !password || !email || !fullName || !phone) {
                alert('Semua field wajib diisi!');
                return;
            }
            
            if (users.find(user => user.username === username)) {
                alert('Username sudah terdaftar!');
                return;
            }
            
            loading.style.display = 'block';
            
            setTimeout(async () => {
                try {
                    const hashedPassword = await hashPassword(password);
                    
                    users.push({ 
                        username, 
                        hashedPassword, 
                        email, 
                        fullName, 
                        phone,
                        role: 'user',
                        registeredDate: new Date()
                    });
                    
                    loading.style.display = 'none';
                    alert('Registrasi berhasil! Silakan login.');
                    showLoginButtons();
                    this.reset();
                } catch (err) {
                    loading.style.display = 'none';
                    alert('Error: ' + err.message);
                }
            }, 1000);
        });

        // Admin Login Form
        adminLoginForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            loading.style.display = 'block';
            
            const username = document.getElementById('adminUsername').value.trim();
            const password = document.getElementById('adminPassword').value.trim();
            
            setTimeout(async () => {
                try {
                    const user = users.find(u => u.username === username && u.role === 'admin');
                    
                    if (!user) {
                        loading.style.display = 'none';
                        alert('Akses admin ditolak!');
                        return;
                    }
                    
                    const match = await comparePassword(password, user.hashedPassword);
                    
                    if (match) {
                        const token = generateToken(username, 'admin');
                        localStorage.setItem('token', token);
                        localStorage.setItem('userRole', 'admin');
                        localStorage.setItem('username', username);
                        loading.style.display = 'none';
                        showAdminDashboard();
                    } else {
                        loading.style.display = 'none';
                        alert('Username atau password salah!');
                    }
                } catch (err) {
                    loading.style.display = 'none';
                    alert('Error: ' + err.message);
                }
            }, 1000);
        });

        // Moderator Login Form
        moderatorLoginForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            loading.style.display = 'block';
            
            const username = document.getElementById('moderatorUsername').value.trim();
            const password = document.getElementById('moderatorPassword').value.trim();
            
            setTimeout(async () => {
                try {
                    const user = users.find(u => u.username === username && u.role === 'moderator');
                    
                    if (!user) {
                        loading.style.display = 'none';
                        alert('Akses moderator ditolak!');
                        return;
                    }
                    
                    const match = await comparePassword(password, user.hashedPassword);
                    
                    if (match) {
                        const token = generateToken(username, 'moderator');
                        localStorage.setItem('token', token);
                        localStorage.setItem('userRole', 'moderator');
                        localStorage.setItem('username', username);
                        loading.style.display = 'none';
                        showModeratorDashboard();
                    } else {
                        loading.style.display = 'none';
                        alert('Username atau password salah!');
                    }
                } catch (err) {
                    loading.style.display = 'none';
                    alert('Error: ' + err.message);
                }
            }, 1000);
        });

        // Upload Form
        document.getElementById('uploadForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const token = localStorage.getItem('token');
            if (!token || !verifyToken(token)) {
                alert('Sesi telah berakhir. Silakan login kembali.');
                logout();
                return;
            }
            
            loading.style.display = 'block';
            
            const username = localStorage.getItem('username');
            const text = document.getElementById('text').value;
            const productName = this.querySelector('[name="productName"]').value;
            
            setTimeout(() => {
                loading.style.display = 'none';
                
                // Log activity
                activityHistory.push({
                    username: username,
                    activity: 'UPLOAD CONTENT',
                    content: text.substring(0, 50) + (text.length > 50 ? '...' : ''),
                    product: productName,
                    timestamp: new Date()
                });
                
                alert('Konten berhasil diupload!');
                this.reset();
            }, 2000);
        });

        // ===== ADMIN DASHBOARD ACTIONS =====
        adminDeleteUserBtn.addEventListener('click', function() {
            const username = document.getElementById('deleteUsername').value.trim();
            if (!username) {
                alert('Please enter username to delete');
                return;
            }
            
            if (username === 'admin' || username === 'moderator') {
                alert('Cannot delete system accounts!');
                return;
            }
            
            const index = users.findIndex(u => u.username === username);
            if (index !== -1) {
                users.splice(index, 1);
                alert(`User ${username} has been deleted.`);
                document.getElementById('deleteUsername').value = '';
                updateAdminStats();
                renderAdminUsersTable();
            } else {
                alert('User not found!');
            }
        });

        adminBroadcastBtn.addEventListener('click', function() {
            const message = document.getElementById('broadcastMessage').value.trim();
            if (!message) {
                alert('Please enter broadcast message');
                return;
            }
            
            alert(`Broadcast message sent to all users: "${message}"`);
            document.getElementById('broadcastMessage').value = '';
        });

        adminRefreshBtn.addEventListener('click', function() {
            updateAdminStats();
            renderAdminUsersTable();
            alert('Admin data refreshed!');
        });

        // ===== MODERATOR DASHBOARD ACTIONS =====
        modCreateUserBtn.addEventListener('click', async function() {
            const username = document.getElementById('newUsername').value;
            const password = document.getElementById('newPassword').value;
            const email = document.getElementById('newEmail').value;
            const fullName = document.getElementById('newFullName').value;
            const phone = document.getElementById('newPhone').value;
            const role = document.getElementById('userRole').value;
            
            if (!username || !password || !email || !fullName || !phone) {
                alert('All fields are required!');
                return;
            }
            
            if (users.find(user => user.username === username)) {
                alert('Username already exists!');
                return;
            }
            
            if (role === 'admin') {
                alert('Moderator cannot create admin accounts!');
                return;
            }
            
            loading.style.display = 'block';
            
            setTimeout(async () => {
                try {
                    const hashedPassword = await hashPassword(password);
                    
                    users.push({ 
                        username, 
                        hashedPassword, 
                        email, 
                        fullName, 
                        phone,
                        role,
                        registeredDate: new Date()
                    });
                    
                    loading.style.display = 'none';
                    alert(`User ${username} created successfully with role ${role}!`);
                    
                    // Reset form
                    document.getElementById('newUsername').value = '';
                    document.getElementById('newPassword').value = '';
                    document.getElementById('newEmail').value = '';
                    document.getElementById('newFullName').value = '';
                    document.getElementById('newPhone').value = '';
                    document.getElementById('userRole').value = 'user';
                    
                    updateModeratorStats();
                    renderModeratorUsersTable();
                } catch (err) {
                    loading.style.display = 'none';
                    alert('Error: ' + err.message);
                }
            }, 1000);
        });

        modRefreshBtn.addEventListener('click', function() {
            updateModeratorStats();
            renderModeratorUsersTable();
            alert('Moderator data refreshed!');
        });

        // ===== LOGOUT HANDLERS =====
        logoutBtn.addEventListener('click', () => logout());
        adminLogoutBtn.addEventListener('click', () => logout());
        modLogoutBtn.addEventListener('click', () => logout());

        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('userRole');
            localStorage.removeItem('username');
            showLoginPage();
        }

        // Initialize with login page
        document.addEventListener('DOMContentLoaded', function() {
            showLoginPage();
        });
    </script>
</body>
</html>
